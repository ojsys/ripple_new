{% extends "base.html" %}
{% load static %}

{% block title %}
    {{ page.title | default:"Accelerator Program" }} - StartUpRipple
{% endblock %}

{% block extra_css %}
<style>
    .program-feature-icon {
        font-size: 2.5rem;
        color: var(--md-primary);
        margin-bottom: 1rem;
    }
    .timeline {
        position: relative;
        padding-left: 3rem;
        border-left: 3px solid var(--md-primary);
    }
    .timeline-item {
        position: relative;
        margin-bottom: 2rem;
    }
    .timeline-item:last-child {
        margin-bottom: 0;
    }
    .timeline-marker {
        position: absolute;
        top: 0;
        left: -2.0rem;
        width: 1.75rem;
        height: 1.75rem;
        background-color: var(--md-primary);
        border: 3px solid var(--md-background);
        border-radius: 50%;
    }
    .sidebar-card {
        position: sticky;
        top: 100px;
    }
</style>
{% endblock %}

{% block content %}

{% if page %}
    <!-- Page Header -->
    <div class="page-header-md">
        <div class="container">
            <h1>{{ page.title }}</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'projects:home' %}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Accelerator</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="container py-5">
        <div class="row g-5">
            <!-- Main Content -->
            <div class="col-lg-8">
                <!-- Image -->
                {% if page.image %}
                    <div class="card-md mb-4">
                        <img src="{{ page.image.url }}" alt="{{ page.title }}" class="img-fluid" style="border-radius: 16px;">
                    </div>
                {% endif %}

                <!-- Program Description -->
                <div class="card-md mb-4">
                    <div class="card-body p-4 p-md-5">
                        <h2 class="mb-4">About Our Program</h2>
                        <div class="text-muted" style="line-height: 1.8;">
                            {{ page.program_description|safe }}
                        </div>
                    </div>
                </div>

                <!-- Program Timeline/Key Stages -->
                {% if page.key_stages %}
                <div class="card-md mb-4">
                    <div class="card-body p-4 p-md-5">
                        <h2 class="mb-4">Program Timeline</h2>
                        <div class="timeline">
                           {{ page.key_stages|safe }}
                        </div>
                    </div>
                </div>
                {% endif %}

            </div>

            <!-- Sidebar -->
            <div class="col-lg-4">
                <div class="sidebar-card">
                    <!-- Application Info Card -->
                    <div class="card-md mb-4">
                        <div class="card-body p-4">
                            <h4 class="mb-3">Join Our Next Cohort</h4>
                            <div class="text-muted small mb-4">
                                {{ page.application_info|safe }}
                            </div>

                            {% if page.application_deadline %}
                                <div class="mb-3">
                                    <h6 class="mb-1 text-muted">Application Deadline</h6>
                                    <strong><i class="fas fa-calendar-alt me-2 text-md-primary"></i>{{ page.application_deadline|date:"F d, Y" }}</strong>
                                </div>
                            {% endif %}
                            
                            <hr class="my-4">

                            {% if page.is_accepting_applications %}
                                <p class="text-success mb-3"><i class="fas fa-check-circle me-2"></i>Applications are currently open!</p>
                                <div class="d-grid">
                                    <a href="{% url 'incubator:apply' %}" class="btn btn-md-filled btn-lg">
                                        Apply Now <i class="fas fa-arrow-right ms-2"></i>
                                    </a>
                                </div>
                            {% else %}
                                <p class="text-danger mb-3"><i class="fas fa-times-circle me-2"></i>Applications are currently closed.</p>
                                <div class="d-grid">
                                    <a href="#" class="btn btn-md-filled btn-lg disabled" aria-disabled="true">
                                        Applications Closed
                                    </a>
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Key Benefits Card -->
                    {% if page.key_benefits %}
                    <div class="card-md">
                        <div class="card-body p-4">
                            <h5 class="mb-3">Key Benefits</h5>
                            <div class="text-muted">
                                {{ page.key_benefits|safe }}
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{% else %}
    <!-- Fallback Content if no page object exists -->
    <div class="page-header-md">
        <div class="container">
            <h1>Accelerator Program</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'projects:home' %}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Accelerator</li>
                </ol>
            </nav>
        </div>
    </div>
    <div class="container py-5">
        <div class="card-md">
            <div class="card-body text-center p-5">
                <h2 class="text-muted">Coming Soon</h2>
                <p>Details about our Accelerator Program are not yet available. Please check back later.</p>
            </div>
        </div>
    </div>
{% endif %}

{% endblock %}